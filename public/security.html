<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Password & Security - Lakastah Makan Cafe</title>
<link rel="stylesheet" href="styles.css">
<link rel="manifest" href="manifest.json">

<style>
/* --- Toggle Switch --- */
.switch-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 1.5rem;
    padding: 0.5rem 0;
}

.switch-label {
    font-weight: 500;
    color: #333;
}

.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 28px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: #ccc;
    border-radius: 34px;
    transition: 0.4s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 22px;
    width: 22px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    border-radius: 50%;
    transition: 0.4s;
}

input:checked + .slider {
    background-color: #4CAF50; /* keep subtle, matches design without changing main colors */
}

input:checked + .slider:before {
    transform: translateX(22px);
}
</style>
</head>
<body>
<div class="container">
    <!-- Header -->
    <div class="header">
        <button class="back-btn" onclick="history.back()">‚Üê</button>
        <h2 class="page-title">Password & Security</h2>
    </div>

    <!-- Security Content -->
    <div class="profile-section">
        <h3 class="section-title">Two-factor authentication (2FA)</h3>
        <div class="info-box">
            <p>
                Two-factor authentication adds an extra layer of security to ensure that you're the only person who can access your account, even if someone knows your password.
            </p>
            <p style="margin-top: 1rem;">
                When logging in, a verification code will be sent to your email. This code must be entered in the app in order to complete the login.
            </p>
        </div>

        <!-- 2FA Toggle -->
        <div class="switch-container">
            <span class="switch-label">Enable 2FA</span>
            <label class="switch">
                <input type="checkbox" id="toggle2FA">
                <span class="slider"></span>
            </label>
        </div>

        <div class="security-requirements">
            <h4 style="margin-bottom: 0.5rem; color: #333;">Password must contain at least:</h4>
            <ul style="margin-left: 1.5rem; color: #666;">
                <li>8 characters</li>
                <li>One upper and lower case characters</li>
                <li>Include one number</li>
            </ul>
        </div>

        <a href="change-password.html" class="btn-primary" style="margin-top: 2rem; display: block; text-align: center; text-decoration: none;">
            Change password ‚Üí
        </a>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
                <a href="home.html" class="nav-item">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-label">Home</span>
                </a>
                <a href="deals.html" class="nav-item">
                    <span class="nav-icon">üè∑Ô∏è</span>
                    <span class="nav-label">Deals</span>
                </a>
                <a href="meals.html" class="nav-item">
                    <span class="nav-icon">üçΩÔ∏è</span>
                    <span class="nav-label">Menu</span>
                </a>
                <a href="cart.html" class="nav-item">
                    <span class="nav-icon">üõí</span>
                    <span class="nav-label">Cart</span>
                </a>
                <a href="profile.html" class="nav-item active">
                    <span class="nav-icon">üë§</span>
                    <span class="nav-label">You</span>
                </a>
            </nav>
</div>
<script>
    // Protect page: only logged-in users allowed
    const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));

    if (!loggedInUser) {
        // Not logged in ‚Üí redirect
        window.location.href = "login.html";
    }
</script>

<script>
// --- Bottom nav click effect ---
const navItems = document.querySelectorAll('.nav-item');
navItems.forEach(item => {
    item.addEventListener('click', () => {
        navItems.forEach(i => i.classList.remove('active'));
        item.classList.add('active');
    });
});

// --- 2FA Toggle with localStorage ---
const toggle2FA = document.getElementById('toggle2FA');

// Load saved state
window.addEventListener('load', () => {
    const savedState = localStorage.getItem('2FA');
    toggle2FA.checked = savedState === 'enabled';
});

// Save toggle state
toggle2FA.addEventListener('change', () => {
    if (toggle2FA.checked) {
        localStorage.setItem('2FA', 'enabled');
    } else {
        localStorage.setItem('2FA', 'disabled');
    }
});
</script>
</body>
</html>
